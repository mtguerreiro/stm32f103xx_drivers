/*
 * ds18b20.h
 *
 *  Created on: 2 de mai de 2021
 *      Author: marco
 */

#ifndef LIBS_DS18B20_H_
#define LIBS_DS18B20_H_

//===========================================================================
/*------------------------------- Includes --------------------------------*/
//===========================================================================
#include <stdint.h>

//===========================================================================


//===========================================================================
/*--------------------------------- Enums ---------------------------------*/
//===========================================================================
typedef enum{
	DS18B20_TEMP_RES_9 = 0,
	DS18B20_TEMP_RES_10,
	DS18B20_TEMP_RES_11,
	DS18B20_TEMP_RES_12
}ds18b20TempRes_t;
//===========================================================================

//===========================================================================
/*------------------------------ Definitions ------------------------------*/
//===========================================================================
/* Error codes */
#define DS18B20_ERR_1W_INIT		-0x01 /** Failed to initialize the 1-wire lib. */
#define DS18B20_ERR_RESET		-0x02 /** Reset command failed. */
#define DS18B20_ERR_WRITE		-0x03 /** Write command failed. */
#define DS18B20_ERR_READ		-0x04 /** Read command failed. */
#define DS18B20_ERR_READ_CRC	-0x05 /** CRC does not match. */
#define DS18B20_ERR_WRITE_SP	-0x06 /** Data read from SP does not match data written. */

//===========================================================================

//===========================================================================
/*------------------------------- Functions -------------------------------*/
//===========================================================================
//---------------------------------------------------------------------------
int32_t ds18b20Initialize(void *gpio, uint8_t pin);
//---------------------------------------------------------------------------
int32_t ds18b20ReadROM(uint8_t *buffer, uint32_t to);
//---------------------------------------------------------------------------
int32_t ds18b20SetTempRes(uint8_t res, uint32_t to);
//---------------------------------------------------------------------------
int32_t ds18b20StartConversion(uint32_t to);
//---------------------------------------------------------------------------
int32_t ds18b20ReadTemp(int8_t *dez, uint32_t to);
//---------------------------------------------------------------------------
int32_t ds18b20ReadTempFull(int8_t *dez, uint16_t *dec, uint32_t to);
//---------------------------------------------------------------------------
//===========================================================================


#endif /* LIBS_DS18B20_H_ */
