/*
 * onewire.c
 *
 *  Created on: 24 de abr de 2021
 *      Author: marco
 */


//===========================================================================
/*------------------------------- Includes --------------------------------*/
//===========================================================================
#include "onewire.h"

/* Driver */
#include "onewirehl.h"
//===========================================================================


//===========================================================================
/*------------------------------- Functions -------------------------------*/
//===========================================================================
//---------------------------------------------------------------------------
int32_t onewireInitialize(void *gpio, uint8_t pin){

	if( onewirehlInitialize(gpio, pin) != 0 ) return 1;

	return 0;
}
//---------------------------------------------------------------------------
int32_t onewireReset(uint32_t to){

	int32_t ret;

	ret = onewirehlReset(to);

	return ret;
}
//---------------------------------------------------------------------------
int32_t onewireWrite(uint8_t *buffer, uint16_t nbytes, uint32_t to){

	uint16_t k;
	uint8_t *p;
	int32_t ret;

	k = 0;
	p = buffer;
	while(k < nbytes){
		ret = onewirehlWrite(*p, to);

		if( ret != 0 ) return ret;

		k++;
		p++;
	}

	return 0;
}
//---------------------------------------------------------------------------
int32_t onewireRead(uint8_t *buffer, uint16_t nbytes, uint32_t to){

	uint16_t k;
	uint8_t *p;
	int32_t ret;

	k = 0;
	p = buffer;
	while(k < nbytes){
		ret = onewirehlRead(p, to);

		if( ret != 0 ) return ret;

		k++;
		p++;
	}


	return 0;
}
//---------------------------------------------------------------------------
//===========================================================================

